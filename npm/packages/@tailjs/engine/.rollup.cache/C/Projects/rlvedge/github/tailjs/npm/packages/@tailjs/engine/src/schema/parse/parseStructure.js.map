{"version":3,"file":"parseStructure.js","sourceRoot":"","sources":["parseStructure.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,aAAa,EAAE,MAAM,GAAG,CAAC;AAElC,MAAM,CAAC,MAAM,cAAc,GAAG,CAC5B,OAAwB,EAIxB,EAAE;IACF,IAAI,SAAS,GAAwC,SAAS,CAAC;IAC/D,IAAI,WAAW,GAAG,OAAO,CAAC;IAE1B,IAAI,OAAO,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QACtC,SAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;QAC1B,WAAW,GAAG,aAAa,CAAC,WAAW,EAAE,sBAAsB,CAAC,CAAC;IACnE,CAAC;IACD,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;QACtC,WAAW,GAAG,aAAa,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;QAElD,CAAC,WAAW,EAAE,CAAC,SAAS,KAAK,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,cAAc,CAAC,WAAW,CAAC,CAAC;QACtE,SAAS,CAAC,KAAK,KAAK,IAAI,CAAC;IAC3B,CAAC;IACD,OAAO,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;AAClC,CAAC,CAAC","sourcesContent":["import { TraverseContext } from \".\";\r\nimport { SchemaPropertyStructure } from \"../..\";\r\nimport { updateContext } from \".\";\r\n\r\nexport const parseStructure = (\r\n  context: TraverseContext\r\n): [\r\n  typeNode: TraverseContext,\r\n  structure: SchemaPropertyStructure | undefined\r\n] => {\r\n  let structure: SchemaPropertyStructure | undefined = undefined;\r\n  let typeContext = context;\r\n\r\n  if (context.node.additionalProperties) {\r\n    structure = { map: true };\r\n    typeContext = updateContext(typeContext, \"additionalProperties\");\r\n  }\r\n  if (typeContext.node.type === \"array\") {\r\n    typeContext = updateContext(typeContext, \"items\");\r\n\r\n    [typeContext, (structure ??= {}).array] = parseStructure(typeContext);\r\n    structure.array ??= true;\r\n  }\r\n  return [typeContext, structure];\r\n};\r\n"]}