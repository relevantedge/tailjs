{"version":3,"file":"env.js","sourceRoot":"","sources":["env.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,kBAAkB,EAClB,eAAe,EACf,eAAe,GAChB,MAAM,YAAY,CAAC;AAEpB,OAAO,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC;AAEnE,MAAM,CAAC,MAAM,mBAAmB,GAAG,iBAAiB,CAAC;AACrD,MAAM,CAAC,MAAM,eAAe,GAAG,aAAa,CAAC;AAC7C,MAAM,CAAC,MAAM,mBAAmB,GAAG,iBAAiB,CAAC;AACrD,MAAM,CAAC,MAAM,kBAAkB,GAAG,gBAAgB,CAAC;AACnD,MAAM,CAAC,MAAM,kBAAkB,GAAG,kBAAkB,CAAC;AACrD,MAAM,CAAC,MAAM,YAAY,GAAG,UAAU,CAAC;AACvC,MAAM,CAAC,MAAM,iBAAiB,GAAG,eAAe,CAAC;AACjD,MAAM,CAAC,MAAM,kBAAkB,GAAG,KAAK,CAAC;AAExC,MAAM,GAAG,GAAG,KAAK,CAAC,EAAE,GAAG,QAAQ,CAAC,aAAc,CAAC,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC;AAC5D,MAAM,IAAI,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC;AAE7C,MAAM,CAAC,MAAM,UAAU,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;AACjC,MAAM,CAAC,MAAM,cAAc,GACzB,IAAI,CAAC,CAAC,CAAC,IAAI,WAAW,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC;AAEzD,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,GAAqB,EAAE,EAAE,CACrD,CAAC,CAAC,CACA,cAAc;IACd,WAAW,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,UAAU,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CACpE,CAAC;AAEJ,MAAM,CAAC,MAAM,MAAM,GAAG,CAAC,GAAG,QAAkB,EAAE,EAAE,CAC9C,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,uBAAuB,EAAE,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAE7E,MAAM,CAAC,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC;AACpD,MAAM,CAAC,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,EAAE,kBAAkB,CAAC,CAAC;AACvD,MAAM,CAAC,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,EAAE,eAAe,CAAC,CAAC","sourcesContent":["import {\n  CONTEXT_MENU_QUERY,\n  EVENT_HUB_QUERY,\n  VARIABLES_QUERY,\n} from \"@constants\";\nimport type { Nullish } from \"@tailjs/util\";\nimport { T, document, join, parseDomain, replace, split } from \".\";\n\nexport const ERR_BUFFER_OVERFLOW = \"buffer-overflow\";\nexport const ERR_POST_FAILED = \"post-failed\";\nexport const ERR_INVALID_COMMAND = \"invalid-command\";\nexport const ERR_INTERNAL_ERROR = \"internal-error\";\nexport const ERR_ARGUMENT_ERROR = \"invalid-argument\";\nexport const ERR_RESERVED = \"reserved\";\nexport const ERR_CONFIG_LOCKED = \"config-locked\";\nexport const ERR_DUPPLICATE_KEY = \"key\";\n\nconst src = split(\"\" + document.currentScript![\"src\"], \"#\");\nconst args = split(\"\" + (src[1] || \"\"), \";\");\n\nexport const SCRIPT_SRC = src[0];\nexport const TRACKER_DOMAIN =\n  args[1] || parseDomain(SCRIPT_SRC)?.domain?.domainName;\n\nexport const isInternalUrl = (url: string | Nullish) =>\n  !!(\n    TRACKER_DOMAIN &&\n    parseDomain(url)?.domain?.domainName.endsWith(TRACKER_DOMAIN) === T\n  );\n\nexport const mapUrl = (...urlParts: string[]) =>\n  replace(join(urlParts), /(^(?=\\?))|(^\\.(?=\\/))/, SCRIPT_SRC.split(\"?\")[0]);\n\nexport const VAR_URL = mapUrl(\"?\", EVENT_HUB_QUERY);\nexport const MNT_URL = mapUrl(\"?\", CONTEXT_MENU_QUERY);\nexport const USR_URL = mapUrl(\"?\", VARIABLES_QUERY);\n"]}