{"version":3,"file":"clientConfigScript.js","sourceRoot":"","sources":["clientConfigScript.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,UAAU,EAAE,MAAM,wBAAwB,CAAC;AACpD,OAAO,EAAE,2BAA2B,EAAE,MAAM,YAAY,CAAC;AAEzD,MAAM,CAAC,MAAM,0BAA0B,GAAG,CACxC,OAAgB,EAChB,MAA+D,EAC/D,EAAE;IACF,OAAO,MAAM,CAAC,UAAU,CAAC,CAAC;IAC1B,OAAO,gFAAgF,IAAI,CAAC,SAAS,CACnG,2BAA2B,CAC5B,gBAAgB,IAAI,CAAC,SAAS,CAC7B,UAAU,CAAC,MAAM,CAAC,CACnB,kBAAkB,IAAI,CAAC,SAAS,CAC/B,MAAM,CAAC,GAAG,CACX,oCAAoC,CAAC;AACxC,CAAC,CAAC","sourcesContent":["import type { TrackerConfiguration } from \"@tailjs/client\";\nimport { Tracker } from \"..\";\nimport { httpEncode } from \"@tailjs/util/transport\";\nimport { INITIALIZE_TRACKER_FUNCTION } from \"@constants\";\n\nexport const generateClientConfigScript = (\n  tracker: Tracker,\n  config: Omit<TrackerConfiguration, \"hub\" | \"dataTags\" | \"vars\">\n) => {\n  delete config[\"dataTags\"];\n  return `((s=document.createElement(\"script\"))=>{s.addEventListener(\"load\",()=>window[${JSON.stringify(\n    INITIALIZE_TRACKER_FUNCTION\n  )}](init=>init(${JSON.stringify(\n    httpEncode(config)\n  )})),true);s.src=${JSON.stringify(\n    config.src\n  )};document.head.appendChild(s)})();`;\n};\n"]}