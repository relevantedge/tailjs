var e,r=void 0,n=Number.MAX_SAFE_INTEGER,t=Symbol.iterator,a=e=>e!==r,i=Array.isArray,o=(e,r=!1)=>null!=e&&"object"==typeof e&&(r||!e[t]),s=e=>"function"==typeof e,c=(e,r=!1)=>e?.[t]&&("object"==typeof e||r),u=!1,l=(e,t,a)=>(t??a)!==r?(t??=0,a??=n,(n,i)=>t--?r:a--?e?e(n,i):n:a):e,f=(e,n,i,o)=>null==e?[]:e[t]?function*(e,n){if(e){var t=0;for(var a of e)if(n&&(a=n(a,t++)),a!==r&&(yield a),u){u=!1;break}}}(e,i===r?n:l(n,i,o)):"object"==typeof e?function*(e,n){var t=0;for(var a in e){var i=[a,e[a]];if(n&&(i=n(i,t++)),i!==r&&(yield i),u){u=!1;break}}}(e,l(n,i,o)):f(s(e)?function*(e,r,n=Number.MAX_SAFE_INTEGER){for(a(r)&&(yield r);n--&&a(r=e(r));)yield r}(e,i,o):function*(e=0,r=0){for(;e--;)yield r++}(e,i),n),p=(e,n,t=r,a)=>{if(t===r&&i(e)){for(var o=0,l=[],p=0,d=e.length;p<d&&!u;p++){var E=e[p];n&&E!==r&&(E=n(E,o++)),E!==r&&l.push(E)}return u=!1,l}return e!==r?((e,n=!1)=>(e=>e===r)(e)?r:!n&&i(e)?e:c(e)?[...e]:[e])(((e,n,t,a)=>null==n||s(n)?f(e,n,t,a):f(e,r,n,t))(e,n,t,a)):r},d=(e,r,n)=>{var t,s=Object.entries(e),c=Object.values(e),u=c.reduce(((e,r)=>e|r),0),l=r?{...e,any:u}:e,f=Object.fromEntries(s.map((([e,r])=>[r,e]))),d=(e,n)=>(e=>"string"==typeof e)(e)?l[e]??l[e.toLowerCase()]:(e=>"number"==typeof e)(e)?!r&&n?a(f[e])?e:void 0:e:void 0,[E,y]=r?[e=>Array.isArray(e)?e.reduce(((e,r)=>null==(r=d(r))?e:(e??0)|r),void 0):d(e),e=>null==(e=E(e))?void 0:s.filter((([,r])=>e&r)).map((([e])=>e))]:[d,e=>null!=(e=d(e))?f[e]:void 0],v=e=>null==e?void 0:null==(e=E(t=e))?(e=>{throw e})(new TypeError(`${JSON.stringify(t)} is not a valid ${n} value.`)):e;return((e,...r)=>{var n=(r,t)=>{if(r){var a;if(i(r)){if(o(r[0]))return void r.splice(1).forEach((e=>n(e,r[0])));a=r}else a=p(r);a.forEach((([r,n])=>Object.defineProperty(e,r,{configurable:!1,enumerable:!0,writable:!1,...t,...o(n)&&("get"in n||"value"in n)?n:{value:n}})))}};return r.forEach((e=>n(e))),e})(v,e,[{enumerable:!1},{parse:v,tryParse:E,entries:s,values:c,lookup:y},r&&{any:u,map:(e,r)=>(e=v(e),s.filter((([,r])=>r&e)).map(r??(([,e])=>e)))}])};!function(e){e[e.Anonymous=0]="Anonymous",e[e.Indirect=1]="Indirect",e[e.Direct=2]="Direct",e[e.Sensitive=3]="Sensitive"}(e||(e={}));var E,y=d({anonymous:0,indirect:1,direct:2,sensitive:3},!1,"data classification");!function(e){e[e.Necessary=1]="Necessary",e[e.Functionality=2]="Functionality",e[e.Performance=4]="Performance",e[e.Targeting=8]="Targeting",e[e.Security=16]="Security",e[e.Infrastructure=32]="Infrastructure",e[e.Any=-1]="Any"}(E||(E={}));var v,A={necessary:1,functionality:2,performance:4,targeting:8,security:16,infrastructure:32},N=d(A,!0,"data purpose"),O=d(A,!1,"data purpose"),S=e=>!!e?.level,T=(e,r)=>e&&y.parse(e.classification)<=y.parse(r.classification??r.level,!1)&&(0===e.classification||((N.parse(e.purposes,!1)??0)&N.parse(r.purposes,!1))>0);!function(e){e[e.Global=0]="Global",e[e.Session=1]="Session",e[e.Device=2]="Device",e[e.User=3]="User",e[e.Entity=4]="Entity"}(v||(v={}));var I,g=d({global:0,session:1,device:2,user:3,entity:4},!1,"variable scope");!function(e){e[e.Success=0]="Success",e[e.Unchanged=1]="Unchanged",e[e.Conflict=2]="Conflict",e[e.Unsupported=3]="Unsupported",e[e.Denied=4]="Denied",e[e.ReadOnly=5]="ReadOnly",e[e.NotFound=6]="NotFound",e[e.Error=7]="Error"}(I||(I={}));var b,R=d({success:0,unchanged:1,conflict:2,unsupported:3,denied:4,readonly:5,notFound:6,error:7},!1,"variable set status");!function(e){e[e.Add=0]="Add",e[e.Min=1]="Min",e[e.Max=2]="Max",e[e.IfMatch=3]="IfMatch"}(b||(b={}));var C=d({add:0,min:1,max:2,ifMatch:3},!1,"variable patch type"),m=e=>!!e.patch,h=[["scope",g],["purpose",O],["purposes",N],["classification",y]],D=e=>e?(h.forEach((([r,n])=>e[r]=n(e[r]))),e):e,_=e=>e?.status<=1,M=e=>2===e?.status,P=e=>7===e?.status,j=(...e)=>r=>r?.type&&e.some((e=>e===r?.type)),U=j("FORM"),G=j("COMPONENT_CLICK"),L=j("COMPONENT_VIEW"),F=j("NAVIGATION"),$=j("SCROLL"),w=j("SEARCH"),k=j("SESSION_STARTED"),V=e=>e&&"string"==typeof e.type,x=j("USER_AGENT"),H=j("VIEW"),W=j("VIEW_ENDED"),B=j("SESSION_LOCATION"),J=j("ANCHOR_NAVIGATION"),X=j("CONSENT"),Y=j("CART_UPDATED"),Z=j("ORDER"),z=j("CART_ABANDONED"),K=j("ORDER_CANCELLED"),q=j("ORDER_COMPLETED"),Q=j("PAYMENT_ACCEPTED"),ee=j("PAYMENT_REJECTED"),re=j("SIGN_OUT"),ne=j("SIGN_IN"),te=j("HEARTBEAT"),ae=j("IMPRESSION"),ie=j("RESET");function oe(e,r){return n(e={...e},"id"),n(e,"view"),n(e,"related"),e;function n(e,n){e?.[n]&&(e[n]=r(e[n])||e[n])}}var se=e=>e?.toLowerCase().replace(/[^a-zA-Z0-9:.-]/g,"_").split(":").filter((e=>e))??[],ce=(e,r,n)=>{if(!e)return[];if(Array.isArray(e)&&(e=e.join(",")),/(?<!(?<!\\)\\)%[A-Z0-9]{2}/.test(e))try{e=decodeURIComponent(e.replace(/([^=&]+)(?:\=([^&]+))?(&|$)/g,((e,r,n,t)=>[r,n&&`="${n.replace(/(?<!(?<!\\)\\)("|%22)/g,'\\"')}"`,t&&","].join(""))))}catch{}var t,a=[],i=se(r);return e.replace(/\s*(\s*(?=\=)|(?:\\.|[^,=\r\n])+)\s*(?:\=\s*(?:"((?:\\.|[^"])*)"|'((?:\\.|[^'])*)'|((?:\\.|[^,])*)))?\s*(?:[,\s]+|$)/g,((e,r,o,s,c)=>{var u=o||s||c,l=se(r);return i.length&&(1===l.length&&!u&&(u=l.pop()),l=i.concat(l)),l.length&&(a.push(t={ranks:l,value:u||void 0}),n?.add(ue(t))),""})),a},ue=e=>null==e?e:`${e.ranks.join(":")}${e.value?`=${e.value.replace(/,/g,"\\,")}`:""}`,le=e=>e;export{e as DataClassification,E as DataPurposes,b as VariablePatchType,v as VariableScope,I as VariableSetStatus,le as cast,y as dataClassification,O as dataPurpose,N as dataPurposes,ue as encodeTag,J as isAnchorEvent,z as isCartAbandonedEvent,Y as isCartEvent,B as isClientLocationEvent,G as isComponentClickEvent,L as isComponentViewEent,M as isConflictResult,X as isConsentEvent,P as isErrorResult,U as isFormEvent,te as isHeartBeatEvent,ae as isImpressionEvent,F as isNavigationEvent,K as isOrderCancelledEvent,q as isOrderCompletedEvent,Z as isOrderEvent,Q as isPaymentAcceptedEvent,ee as isPaymentRejectedEvent,ie as isResetEvent,$ as isScrollEvent,w as isSearchEvent,k as isSessionStartedEvent,ne as isSignInEvent,re as isSignOutEvent,_ as isSuccessResult,V as isTrackedEvent,x as isUserAgentEvent,S as isUserConsent,m as isVariablePatch,W as isViewEndedEvent,H as isViewEvent,ce as parseTagString,C as patchType,R as setStatus,D as toStrict,oe as transformLocalIds,T as validateConsent,g as variableScope};
